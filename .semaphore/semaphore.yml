version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Tests
    task:
      jobs:
        - name: Static tests
          commands:
            - echo "running static tests"
            - npx prettier --check "src/**/*.ts" "tests/**/*.ts"
            - npx eslint "src/**/*.ts" "tests/**/*.ts"
        - name: Unit tests
          commands:
            - echo "running unit tests"
            - npm run test
      prologue:
        commands:
          - checkout
          - npm ci
      env_vars:
        - name: riot_api_key
          value: RGAPI-0b4ed232-f6f2-4984-a10c-0a1863102ef8
